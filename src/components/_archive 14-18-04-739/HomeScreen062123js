// src/Screens/HomeScreen062123.js
import { getStoresNeumadsReview, getArticleNeumadsTrail, getArticlePost } from "../api.js";
import PrimaryFeaturedBlog from "../components/PrimaryFeaturedBlog";
import FeaturedBlog from "../components/FeaturedBlog";
import AllBlog from "../components/AllBlog.js";
import { sortByDistance } from '../utils';
import { createGeojsonListing } from '../components/GeojsonListing';
import { geojsonStore } from "../components/GeojsonStores";
import allTags, { tagsFilter } from '../components/DataTags';
import HeaderMap from '../components/Header';

const HomeScreen = {
  BlogData: [],
  render: async function() {
    const { features } = HeaderMap.BlogData;
    function handleTagClick(event) {
      const tag = event.target.textContent;
      const filteredPosts = tagsFilter(BlogData, tag);
      console.log("returned tagsFilter",tagsFilter);
      // Now, filteredPosts contains the posts that have the clicked tag
      // You can update the UI to display these posts
      // const filteredPosts = this.BlogData.filter(blog => blog.tags && blog.tags[0].tags.includes(tags));
      console.log('filteredPosts in Homescreen', filteredPosts);
      // Update UI
      const primaryFeaturedBlogs = filteredPosts.slice(0,1);
      const featuredBlogs = filteredPosts.slice(2,5);
      const allBlogs = filteredPosts.slice(3);
      document.getElementById('featured-blog-layout').innerHTML = `
        ${primaryFeaturedBlogs.map((primaryFeaturedBlog) => `${PrimaryFeaturedBlog.render(primaryFeaturedBlog)}`).join("\n")}
        ${featuredBlogs.map((featuredBlog) => `${FeaturedBlog.render(featuredBlog)}`).join("\n")}
      `;
      document.getElementById('blog-layout').innerHTML = `
        ${allBlogs
          .map((allBlog) => AllBlog.render(allBlog))
          .join("\n")}
      `;

      // Apply active state to the clicked tag
      tagElements.forEach((tagElement) => {
        tagElement.classList.remove('active');
      });
      event.target.classList.add('active');
    }
    console.log("features", features);
    this.BlogData = await HeaderMap.BlogData; // Fetch BlogData
    if (!this.BlogData) { // Check if BlogData is defined
      console.log("BlogData is undefined");
      return;
    }
    console.log("BlogData", this.BlogData);
    const primaryFeaturedBlogs = this.BlogData.slice(0,1);
    const featuredBlogs = this.BlogData.slice(2,5);
    const allBlogs = this.BlogData.slice(3);
    const selectedLocation = JSON.parse(localStorage.getItem('selectedLocation') || 'null');
    const sortedBlogData = sortByDistance(selectedLocation, this.BlogData);
    const createListing = (store) => {
      const onClick = () => {}; // Define the onClick behavior if needed
      return createGeojsonListing(store, onClick).outerHTML;
    };  
    const geojsonListings = sortedBlogData.slice(0, 3).map(createListing).join('\n');
    return `
    <div id="blog-layout">
      <div class="geojson-listings container" id="geojson-listings">
        ${geojsonListings}
      </div>
      <div class="featured-blog-layout container">
      <div id="featured-blog-layout">
        ${primaryFeaturedBlogs.map((primaryFeaturedBlog) => `${PrimaryFeaturedBlog.render(primaryFeaturedBlog)}`).join("\n")}
        ${featuredBlogs.map((featuredBlog) => `${FeaturedBlog.render(featuredBlog)}`).join("\n")}
        </div>
        </div>
        <div class="section-header container" id="section-header">
          <div class="work-title">
           <span class="display03">
              Other Neumadic Articles
            </span>
          </div>
        </div>
        <div class="blog-layout container" id="blog-layout">
          ${allBlogs
            .map((allBlog) => AllBlog.render(allBlog))
            .join("\n")}
        </div>
        <div class="load-btn">
          <button class="load" id="load">Load more</button>
        </div>
      </div>
    `;
  },
  after_render: function() {
    const btn = document.getElementById("load");
    let index = 0;
    btn.addEventListener("click", loadData.bind(this));
    async function loadData() {
      // Fetch more blogs using the same getArticleNeumadsTrail function
      const blogs = await getArticleNeumadsTrail(3, 3 * ++index + 1);
      let template = document.getElementById("blog-layout");
      const data = blogs
        .map((blog) => FeaturedBlog.render(blog))
        .join("\n");
      template.insertAdjacentHTML("beforeend", data);
      if (blogs.length === 0) {
        btn.disabled = true;
        btn.innerText = "No more blogs";
      }
    }

    // Add event listener to tags
    const tagElements = document.querySelectorAll(".metadata-tag");
    // const tagElements = document.querySelectorAll(".metadata-tag");
    tagElements.forEach((tagElement) => {
      tagElement.addEventListener("click", handleTagClick.bind(this));
    });

    function handleTagClick(event) {
      const tags = event.target.metatag;
      document.getElementById("metatag").innerHTML = metatag;
      // console.log('tags in Homescreen', target.content);
      const filteredPosts = this.BlogData.filter(blog => blog.tags && blog.tags[0].tags.includes(tags));
      console.log('filteredPosts in Homescreen', filteredPosts);
      // Update UI
      const primaryFeaturedBlogs = filteredPosts.slice(0,1);
      const featuredBlogs = filteredPosts.slice(2,5);
      const allBlogs = filteredPosts.slice(3);
      document.getElementById('featured-blog-layout').innerHTML = `
      ${primaryFeaturedBlogs.map((primaryFeaturedBlog) => `${PrimaryFeaturedBlog.render(primaryFeaturedBlog)}`).join("\n")}
      ${featuredBlogs.map((featuredBlog) => `${FeaturedBlog.render(featuredBlog)}`).join("\n")}
      `;
      document.getElementById('blog-layout').innerHTML = `
      ${allBlogs
        .map((allBlog) => AllBlog.render(allBlog))
        .join("\n")}
      `;

      // Apply active state to the clicked tag
      tagElements.forEach((tagElement) => {
        tagElement.classList.remove('active');
      });
      event.target.classList.add('active');
    }
  },
};

export default HomeScreen;

















// // src/screens/Header062323.js
// import allTags from '../components/DataTags';
// import { getArticleNeumadsTrail, getStoresNeumadsReview, getArticlePost } from "../api.js";
// import { weatherData, fetchCityWeatherData } from "./weatherReport.js";
// import LocationInput from "../components/locationInput.js";
// import fetchDateTime from "../components/timeApi.js";
// import { createGeocoderInput } from "../components/GeocoderInput";
// import { geojsonStore } from "../components/GeojsonStores";
// import { sortByDistance } from "../utils";

// function getTopTags(BlogData, limit = 10) {
//   const tagCounts = {};
//   BlogData.forEach((blog) => {
//     const tags = blog.tag && blog.tag.length ? blog.tag[0].tags : [];
//     tags.forEach((tag) => {
//       tagCounts[tag] = (tagCounts[tag] || 0) + 1;
//     });
//   });

//   const sortedTags = Object.entries(tagCounts)
//     .sort((a, b) => b[1] - a[1])
//     .map((entry) => entry[0]);

//   return sortedTags.slice(0, limit);
// }






// const HeaderMap = {
//     BlogData: [],
//     render: async function() { // Change this line
//       const articleData = await getArticleNeumadsTrail(9, 0);
//       const storeData = await getStoresNeumadsReview(9, 0);
//       const postData = await getArticlePost(9, 0);
//       this.BlogData = [...articleData, ...storeData, ...postData];
//       const topTags = getTopTags(this.BlogData, 10);
//       const tagsHTML = allTags(topTags);
//       const newLocal = `
//         <nav class="navigation container nav-top">

//             <section class="nav-reportBar">
//                 <div class="nav-reportBar-content">
//                 <div class="nav-reportBar-content-container">
//                     <div class="nav-reportBar-content-wrapper">
//                     <span class="text01">Report Bar Content 01</span>
//                     <span class="text01">Data 01</span>
//                     <span class="text01">Data 02</span>
//                     </div>
//                     <div class="nav-reportBar-content-wrapper">
//                     <span class="text01">Report Bar Content 01</span>
//                     <span class="text01">Data 01</span>
//                     <span class="text01">Data 02</span>
//                     </div>
//                 </div>
//                 </div>
//             </section>
//             <section class="nav-utility">
//                 <div class="nav-utility-container">x
//                 <div class="nav-utility-left">
//                     <!-- hamburger --> 
//                     <div class="hamburger"><i class="icon-hamburger"></i></div>
//                 </div>
//                 <div class="nav-utility-mid">
//                     <div class="nav-utility-mid-logo">
//                         <!-- logo -->
//                         <img src="./_assets/_brand/logo/neumad_logo_text_light.svg" alt="">
//                     </div>
//                 </div>
//                 <!-- search -->
//                 <div class="nav-utility-right">
//                     <div class="search-wrapper" id="geocoder-container">
//                     </div>
//                 </div>
//                 </div>
//             </section>



//             <section class="nav-mid">
//                 <div class="nav-mid-left"> 
//                 <div class="current-date current-data">
//                     <span class="bold01" data-testid="current-date">
//                     $ with {currentDate}
//                     </span>
//                 </div> 
//                 <div class="current-location current-data">
//                     <span class="text01" data-testid="current-location">
//                     $ with {currentLocation}
//                     </span>
//                 </div>
//                 </div> 
//                 <div class="nav-brand-logo">
//                 <!-- logo -->
//                 <a class="logo" href="/"> 
//                     <img src="./_assets/_brand/logo/neumad_logo_text_light.svg" alt="" />
//                 </a>
//                 </div>
//                 <div class="nav-mid-right">
//                 <div class="current-temp current-data">
//                     <i class="bx bx-cloud"></i>
//                     <span class="bold01" data-testid="current-temp">
//                     $ with {currentTemp}°F 
//                     </span>
//                 </div>
//                 <div class="current-time current-data">
//                     <span class="text01" data-testid="current-time">
//                     $ with {datetime}
//                     </span>
//                 </div>
//                 </div>
//             </section>
    
//             <section class="nav-tags">
//                 <div class="nav-tags-container">
//                 <div class="nav-tags-menu"> 
//                     <!-- menu -->  
//                     <ul class="nav-tags-list nav-tags-flex"> 
                
//                     <li>
//                         <a href="/#/work">
//                         <div class="section-tag" id="Work">
//                             <i class="section-tag-icon icon-Work"></i>
//                             <!--<span class="section-tag-divider">
//                             <div class="lineV"></div>
//                             </span>-->
//                             <span class="section-tag-text bold01">
//                                 Work
//                             </span>
//                         </div>
//                         </a>
//                     </li>
                    
//                     <li>
//                         <a href="/#/dine">
//                         <div class="section-tag" id="Dine">
//                             <i class="section-tag-icon icon-Dine"></i>
//                             <!--<span class="section-tag-divider">
//                             <div class="lineV"></div>
//                             </span>-->
//                             <span class="section-tag-text bold01">
//                                 Dine
//                             </span>
//                         </div>
//                         </a>
//                     </li>
                
//                     <li>
//                         <a href="/#/unwind">
//                         <div class="section-tag" id="Unwind">
//                             <i class="section-tag-icon icon-Unwind"></i>
//                             <!--<span class="section-tag-divider">
//                             <div class="lineV"></div>
//                             </span>-->
//                             <span class="section-tag-text bold01">
//                                 Unwind
//                             </span>
//                         </div>
//                         </a>
//                     </li>

//                     <li>
//                         <a href="/#/shorts">
//                         <div class="section-tag" id="Shorts">
//                             <i class="section-tag-icon icon-Shorts"></i>
//                             <!--<span class="section-tag-divider">
//                             <div class="lineV"></div>
//                             </span>-->
//                             <span class="section-tag-text bold01">
//                             Shorts
//                             </span>
//                         </div>
//                         </a>
//                     </li>

//                     <li>
//                         <a href="/#/series">
//                         <div class="section-tag" id="Series">
//                             <i class="section-tag-icon icon-Series"></i>
//                             <!--<span class="section-tag-divider">
//                             <div class="lineV"></div>
//                             </span>-->
//                             <span class="section-tag-text bold01">
//                             Series
//                             </span>
//                         </div>
//                         </a>
//                     </li>

//                     <li>
//                         <a href="/#/Map">
//                         <div class="section-tag" id="Location">
//                             <i class="section-tag-icon icon-Places"></i>
//                             <!--<span class="section-tag-divider">
//                             <div class="lineV"></div>
//                             </span>-->
//                             <span class="section-tag-text bold01">
//                             Places
//                             </span>
//                         </div>
//                         </a>
//                     </li>

//                     <li>
//                         <a href="/#/reviews">
//                         <div class="section-tag" id="Reviews">
//                             <i class="section-tag-icon icon-Reviews"></i>
//                             <!--<span class="section-tag-divider">
//                             <div class="lineV"></div>
//                             </span>-->
//                             <span class="section-tag-text bold01">
//                             Reviews
//                             </span>
//                         </div>
//                         </a>
//                     </li>
                    
                    
//                     <div class="nav-list-divider">
//                         <div class="lineV"></div>
//                     </div>

//                     </ul>
//                 </div>  

                
//                 </div>   
//             </section>
            
//             <!-- DATA -->
//             <section class="data">
//                 <div class="blog-data">
//                     ${tagsHTML}
//                 </div>
//             </section>
//             <!-- DATA -->

//             <!--SIDEBAR-->
//             <!-- menu -->  
//             <section class="nav-menu">
//                 <div class="nav-menu-container">
            
//                 <ul class="nav-menu-list nav-menu-flex"> 
//                     <li>
//                         <div class="nav-utility-right">
//                             <!-- search -->
//                             <!-- <div class="search-wrapper">
//                                 <header class="main-search clearfix">
//                                 <button type="button" class="btn pull-right" id="search-toggle">
//                                     <span class="fa fa-search icon-search"></i>
//                                 </button>
//                                 <div class="form-search stretch-to-fit">
//                                     <label for="search" class="btn pull-left">
//                                     <span class="btn fa fa-search icon-search"></i>
//                                     </label>
//                                     <div class="search-control stretch-to-fit">
//                                     <input type="text" id="search" placeholder="Search...">
//                                     </div>
//                                 </div>
//                                 </header>
//                             </div>-->
//                         </div>
//                     </li>

//                     <li>
//                     <div class="navWork-list-divider">
//                         <div class="lineV"></div>
//                     </div>
//                     <li>
//                         <a href="/#/work">
//                         <span class="display06">Work</span>
//                         </a>
//                     </li>
//                     <div class="navWork-list-divider">
//                         <div class="lineV"></div>
//                     </div>
//                     <li>
//                         <a href="/#/dine">
//                         <span class="display06">Dine</span>
//                         </a>
//                     </li>
//                     <div class="navWork-list-divider">
//                         <div class="lineV"></div>
//                     </div> 
//                     <li>
//                         <a href="/#/unwind"> 
//                         <span class="display06">Unwind</span>
//                         </a>
//                     </li>
//                     <div class="navWork-list-divider">
//                         <div class="lineV"></div>
//                     </div>
//                     <li>
//                         <a href="/#/shorts"> 
//                         <span class="display06">Shorts</span>
//                         </a> 
//                     </li>
//                     <div class="navWork-list-divider">
//                         <div class="lineV"></div> 
//                     </div> 
//                     </ul>
//                 <div class="lineH"></div>
//                     <ul class="nav-menu-list nav-menu-flex">
//                     <li>
//                         <a href="/#/about">
//                         <span class="display03">About</span>
//                         </a>
//                     </li>
//                     <div class="navWork-list-divider">
//                         <div class="lineV"></div>
//                     </div> 
//                     <li>
//                         <a href="/#/contact"> 
//                         <span class="display03">Contact</span>
//                         </a>
//                     </li>
//                     <div class="navWork-list-divider">
//                         <div class="lineV"></div>
//                     </div>
//                 </ul>
//                 </div> 
//             </div>   
//             </section>        
//         </nav>`;
//         return newLocal;
//     },

//     // ... rest of your render function code ...

//   after_render: () => {
//     setTimeout(() => {
//       const moreTag = document.getElementById("more-tag");
//       moreTag.addEventListener("click", this.handleMoreClick.bind(this));
//       const tagElements = document.querySelectorAll(".metadata-tag");
//       tagElements.forEach((tagElement) => {
//         tagElement.addEventListener("click", this.handleTagClick.bind(this));
//       });
//     }, 0);
  
//   const HeaderMap = {
//     async handleMoreClick() { // Change this line
//         const articleData = await getArticleNeumadsTrail(9, 0);
//         const storeData = await getStoresNeumadsReview(9, 0);
//         const postData = await getArticlePost(9, 0);
//         this.BlogData = [...articleData, ...storeData, ...postData];
//         const topTags = getTopTags(this.BlogData, 10);
//         const tagsHTML = allTags(topTags);
//         document.getElementById("blog-data").innerHTML = tagsHTML;
//   },
//   handleTagClick(event) {
//     const tag = event.target.textContent;
//     const filteredPosts = tagsFilter(this.BlogData, tag);
//     // Now, filteredPosts contains the posts that have the clicked tag
//     // You can update the UI to display these posts
//   },
// };
// }};
// function storeSelectedLocation(result) {
//   if (result && result.result && result.result.geometry) {
//     localStorage.setItem(
//       "selectedLocation",
//       JSON.stringify(result.result.geometry.coordinates)
//     );
//   }
// }

// export default HeaderMap;



















// // src/screens/Header.js
// import allTags from '../components/DataTags';
// import { getArticleNeumadsTrail, getStoresNeumadsReview, getArticlePost } from "../api.js";
// import { weatherData, fetchCityWeatherData } from "./weatherReport.js";
// import LocationInput from "../components/locationInput.js";
// import fetchDateTime from "../components/timeApi.js";
// import { createGeocoderInput } from "../components/GeocoderInput";
// import { geojsonStore } from "../components/GeojsonStores";
// import { sortByDistance } from "../utils";

// function getTopTags(BlogData, limit = 10) {
//   const tagCounts = {};
//   BlogData.forEach((blog) => {
//     const tags = blog.tag && blog.tag.length ? blog.tag[0].tags : [];
//     tags.forEach((tag) => {
//       tagCounts[tag] = (tagCounts[tag] || 0) + 1;
//     });
//   });

//   const sortedTags = Object.entries(tagCounts)
//     .sort((a, b) => b[1] - a[1])
//     .map((entry) => entry[0]);

//   return sortedTags.slice(0, limit);
// }


// const HeaderMap = {
//     BlogData: [], // Define BlogData here
//     render: async () => {

// //   constructor() {
// //     this.BlogData = [];
// //   }

//     render: async () => {
//         const articleData = await getArticleNeumadsTrail(9, 0);
//         const storeData = await getStoresNeumadsReview(9, 0);
//         const postData = await getArticlePost(9, 0);
//         const BlogData = [...articleData, ...storeData, ...postData];
//         console.log("BlogData", BlogData);

//         const topTags = getTopTags(BlogData, 10);
//         const tagsHTML = allTags(topTags);
    
//         const newLocal = `
//         <nav class="navigation container nav-top">

//             <section class="nav-reportBar">
//                 <div class="nav-reportBar-content">
//                 <div class="nav-reportBar-content-container">
//                     <div class="nav-reportBar-content-wrapper">
//                     <span class="text01">Report Bar Content 01</span>
//                     <span class="text01">Data 01</span>
//                     <span class="text01">Data 02</span>
//                     </div>
//                     <div class="nav-reportBar-content-wrapper">
//                     <span class="text01">Report Bar Content 01</span>
//                     <span class="text01">Data 01</span>
//                     <span class="text01">Data 02</span>
//                     </div>
//                 </div>
//                 </div>
//             </section>




//             <section class="nav-utility">
//                 <div class="nav-utility-container">x
//                 <div class="nav-utility-left">
//                     <!-- hamburger --> 
//                     <div class="hamburger"><i class="icon-hamburger"></i></div>
//                 </div>
//                 <div class="nav-utility-mid">
//                     <div class="nav-utility-mid-logo">
//                         <!-- logo -->
//                         <img src="./_assets/_brand/logo/neumad_logo_text_light.svg" alt="">
//                     </div>
//                 </div>
//                 <!-- search -->
//                 <div class="nav-utility-right">
//                     <div class="search-wrapper" id="geocoder-container">
//                     </div>
//                 </div>
//                 </div>
//             </section>



//             <section class="nav-mid">
//                 <div class="nav-mid-left"> 
//                 <div class="current-date current-data">
//                     <span class="bold01" data-testid="current-date">
//                     $ with {currentDate}
//                     </span>
//                 </div> 
//                 <div class="current-location current-data">
//                     <span class="text01" data-testid="current-location">
//                     $ with {currentLocation}
//                     </span>
//                 </div>
//                 </div> 
//                 <div class="nav-brand-logo">
//                 <!-- logo -->
//                 <a class="logo" href="/"> 
//                     <img src="./_assets/_brand/logo/neumad_logo_text_light.svg" alt="" />
//                 </a>
//                 </div>
//                 <div class="nav-mid-right">
//                 <div class="current-temp current-data">
//                     <i class="bx bx-cloud"></i>
//                     <span class="bold01" data-testid="current-temp">
//                     $ with {currentTemp}°F 
//                     </span>
//                 </div>
//                 <div class="current-time current-data">
//                     <span class="text01" data-testid="current-time">
//                     $ with {datetime}
//                     </span>
//                 </div>
//                 </div>
//             </section>
    
//             <section class="nav-tags">
//                 <div class="nav-tags-container">
//                 <div class="nav-tags-menu"> 
//                     <!-- menu -->  
//                     <ul class="nav-tags-list nav-tags-flex"> 
                
//                     <li>
//                         <a href="/#/work">
//                         <div class="section-tag" id="Work">
//                             <i class="section-tag-icon icon-Work"></i>
//                             <!--<span class="section-tag-divider">
//                             <div class="lineV"></div>
//                             </span>-->
//                             <span class="section-tag-text bold01">
//                                 Work
//                             </span>
//                         </div>
//                         </a>
//                     </li>
                    
//                     <li>
//                         <a href="/#/dine">
//                         <div class="section-tag" id="Dine">
//                             <i class="section-tag-icon icon-Dine"></i>
//                             <!--<span class="section-tag-divider">
//                             <div class="lineV"></div>
//                             </span>-->
//                             <span class="section-tag-text bold01">
//                                 Dine
//                             </span>
//                         </div>
//                         </a>
//                     </li>
                
//                     <li>
//                         <a href="/#/unwind">
//                         <div class="section-tag" id="Unwind">
//                             <i class="section-tag-icon icon-Unwind"></i>
//                             <!--<span class="section-tag-divider">
//                             <div class="lineV"></div>
//                             </span>-->
//                             <span class="section-tag-text bold01">
//                                 Unwind
//                             </span>
//                         </div>
//                         </a>
//                     </li>

//                     <li>
//                         <a href="/#/shorts">
//                         <div class="section-tag" id="Shorts">
//                             <i class="section-tag-icon icon-Shorts"></i>
//                             <!--<span class="section-tag-divider">
//                             <div class="lineV"></div>
//                             </span>-->
//                             <span class="section-tag-text bold01">
//                             Shorts
//                             </span>
//                         </div>
//                         </a>
//                     </li>

//                     <li>
//                         <a href="/#/series">
//                         <div class="section-tag" id="Series">
//                             <i class="section-tag-icon icon-Series"></i>
//                             <!--<span class="section-tag-divider">
//                             <div class="lineV"></div>
//                             </span>-->
//                             <span class="section-tag-text bold01">
//                             Series
//                             </span>
//                         </div>
//                         </a>
//                     </li>

//                     <li>
//                         <a href="/#/Map">
//                         <div class="section-tag" id="Location">
//                             <i class="section-tag-icon icon-Places"></i>
//                             <!--<span class="section-tag-divider">
//                             <div class="lineV"></div>
//                             </span>-->
//                             <span class="section-tag-text bold01">
//                             Places
//                             </span>
//                         </div>
//                         </a>
//                     </li>

//                     <li>
//                         <a href="/#/reviews">
//                         <div class="section-tag" id="Reviews">
//                             <i class="section-tag-icon icon-Reviews"></i>
//                             <!--<span class="section-tag-divider">
//                             <div class="lineV"></div>
//                             </span>-->
//                             <span class="section-tag-text bold01">
//                             Reviews
//                             </span>
//                         </div>
//                         </a>
//                     </li>
                    
                    
//                     <div class="nav-list-divider">
//                         <div class="lineV"></div>
//                     </div>

//                     </ul>
//                 </div>  

                
//                 </div>   
//             </section>
            
//             <!-- DATA -->
//             <section class="data">
//                 <div class="blog-data">
//                     ${tagsHTML}
//                 </div>
//             </section>
//             <!-- DATA -->

//             <!--SIDEBAR-->
//             <!-- menu -->  
//             <section class="nav-menu">
//                 <div class="nav-menu-container">
            
//                 <ul class="nav-menu-list nav-menu-flex"> 
//                     <li>
//                         <div class="nav-utility-right">
//                             <!-- search -->
//                             <!-- <div class="search-wrapper">
//                                 <header class="main-search clearfix">
//                                 <button type="button" class="btn pull-right" id="search-toggle">
//                                     <span class="fa fa-search icon-search"></i>
//                                 </button>
//                                 <div class="form-search stretch-to-fit">
//                                     <label for="search" class="btn pull-left">
//                                     <span class="btn fa fa-search icon-search"></i>
//                                     </label>
//                                     <div class="search-control stretch-to-fit">
//                                     <input type="text" id="search" placeholder="Search...">
//                                     </div>
//                                 </div>
//                                 </header>
//                             </div>-->
//                         </div>
//                     </li>

//                     <li>
//                     <div class="navWork-list-divider">
//                         <div class="lineV"></div>
//                     </div>
//                     <li>
//                         <a href="/#/work">
//                         <span class="display06">Work</span>
//                         </a>
//                     </li>
//                     <div class="navWork-list-divider">
//                         <div class="lineV"></div>
//                     </div>
//                     <li>
//                         <a href="/#/dine">
//                         <span class="display06">Dine</span>
//                         </a>
//                     </li>
//                     <div class="navWork-list-divider">
//                         <div class="lineV"></div>
//                     </div> 
//                     <li>
//                         <a href="/#/unwind"> 
//                         <span class="display06">Unwind</span>
//                         </a>
//                     </li>
//                     <div class="navWork-list-divider">
//                         <div class="lineV"></div>
//                     </div>
//                     <li>
//                         <a href="/#/shorts"> 
//                         <span class="display06">Shorts</span>
//                         </a> 
//                     </li>
//                     <div class="navWork-list-divider">
//                         <div class="lineV"></div> 
//                     </div> 
//                     </ul>
//                 <div class="lineH"></div>
//                     <ul class="nav-menu-list nav-menu-flex">
//                     <li>
//                         <a href="/#/about">
//                         <span class="display03">About</span>
//                         </a>
//                     </li>
//                     <div class="navWork-list-divider">
//                         <div class="lineV"></div>
//                     </div> 
//                     <li>
//                         <a href="/#/contact"> 
//                         <span class="display03">Contact</span>
//                         </a>
//                     </li>
//                     <div class="navWork-list-divider">
//                         <div class="lineV"></div>
//                     </div>
//                 </ul>
//                 </div> 
//             </div>   
//             </section>        
//         </nav>`;
//         return newLocal;
//     },
  

//   after_render() {
//     setTimeout(() => {
//       const moreTag = document.getElementById("more-tag");
//       moreTag.addEventListener("click", this.handleMoreClick.bind(this));
//       const tagElements = document.querySelectorAll(".metadata-tag");
//       tagElements.forEach((tagElement) => {
//         tagElement.addEventListener("click", this.handleTagClick.bind(this));
//       });
//     }, 0);
//   },


//   async handleMoreClick() {
//     const articleData = await getArticleNeumadsTrail(9, 0);
//     const storeData = await getStoresNeumadsReview(9, 0);
//     const postData = await getArticlePost(9, 0);
//     this.BlogData = [...articleData, ...storeData, ...postData];
//     const topTags = getTopTags(this.BlogData, 10);
//     const tagsHTML = allTags(topTags);
//     document.getElementById("blog-data").innerHTML = tagsHTML;
//   },

//   handleTagClick(event) {
//     const tag = event.target.textContent;
//     const filteredPosts = tagsFilter(this.BlogData, tag);
//     // Now, filteredPosts contains the posts that have the clicked tag
//     // You can update the UI to display these posts
//   }
// };

// function storeSelectedLocation(result) {
//   if (result && result.result && result.result.geometry) {
//     localStorage.setItem(
//       "selectedLocation",
//       JSON.stringify(result.result.geometry.coordinates)
//     );
//   }
// }


// function getTopTags(BlogData, limit = 10) {
//   const tagCounts = {};
//   BlogData.forEach((blog) => {
//     const tags = blog.tag && blog.tag.length ? blog.tag[0].tags : [];
//     tags.forEach((tag) => {
//       tagCounts[tag] = (tagCounts[tag] || 0) + 1;
//     });
//   });

//   const sortedTags = Object.entries(tagCounts)
//     .sort((a, b) => b[1] - a[1])
//     .map((entry) => entry[0]);

//   return sortedTags.slice(0, limit);
// }

// export default HeaderMap;

//     after_render: async () => {
//     const features = await geojsonStore();
//     const geocoder = createGeocoderInput(features);

//     geocoder.on('result', storeSelectedLocation);

//     const navList = document.querySelector(".nav-list");
//     const hamburger = document.querySelector(".hamburger");
//     const header = document.querySelector(".header");
//     const headerMid = document.querySelector(".nav-mid");
//     const utilityLogo = document.querySelector(".nav-utility-mid-logo");
//     const search = document.querySelector("#search-toggle");

//     hamburger.addEventListener("click", () => {
//         navList.classList.toggle("show");
//     });

//     const navHeight = header.getBoundingClientRect().height;
//     window.addEventListener("scroll", () => {
//         const scrollHeight = window.pageYOffset;
//         if (scrollHeight > navHeight) {
//         header.classList.add("fix");
//         headerMid.classList.add("hide");
//         utilityLogo.classList.add("show");

//         } else {
//         header.classList.remove("fix");
//         headerMid.classList.remove("hide");
//         utilityLogo.classList.remove("show");
//         }
//     });

//     const geocoderContainer = document.getElementById('geocoder-container');
//     document.getElementById('geocoder-container').appendChild(geocoder.onAdd(window.map));

//     // Removed geocoder.on('result', ...) event listener

//     const links = [...document.querySelectorAll(".nav-list a")];
//     links.map((link) => {
//         link.addEventListener("click", () => {
//         window.scrollTo({
//             top: 0,
//             left: 0,
//             behavior: "smooth",
//         });
//         });
//     });
//     },
// };
// export default HeaderMap;
